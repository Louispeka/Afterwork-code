{% extends 'base.html.twig' %}

{% block title %}Afterwork EPSI{% endblock %}

{% block body %}
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion / Inscription</title>
<style>
       body { font-family: Arial, sans-serif; margin: 20px; }
       form { margin-bottom: 20px; }
       input { margin-bottom: 10px; display: block; }
       button { padding: 10px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
       button:hover { background-color: #0056b3; }
       .header { display: flex; justify-content: space-between; align-items: center; }
       .logo { font-size: 24px; }
       .dropdown {
           position: relative;
           display: inline-block;
       }
       .dropdown-content {
           display: none;
           position: absolute;
           background-color: #f9f9f9;
           min-width: 160px;
           box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
           z-index: 1;
       }
       .dropdown:hover .dropdown-content {
           display: block;
       }
       .profile-link { text-decoration: none; color: black; padding: 12px 16px; display: block; }
       .profile-link:hover { background-color: #f1f1f1; }
</style>
</head>
<body>
    <div class="header">
    <div class="logo">Mon Site de Bière</div>
    <div class="dropdown">
<?php if (isset($_SESSION['user_id'])): ?>
<button class="dropbtn"><?php echo htmlspecialchars($_SESSION['first_name']); ?></button>
<div class="dropdown-content">
<a class="profile-link" href="profile.php">Mon Profil</a>
<a class="profile-link" href="?logout=1">Déconnexion</a>
</div>
<?php else: ?>
<button class="dropbtn">Connexion</button>
<div class="dropdown-content">
<a class="profile-link" href="#loginModal" onclick="document.getElementById('loginModal').style.display='block'">Se Connecter</a>
<a class="profile-link" href="#registerModal" onclick="document.getElementById('registerModal').style.display='block'">Créer un Compte</a>
</div>
<?php endif; ?>
</div>
</div>
<!-- Formulaire d'inscription -->
<div id="registerModal" style="display:none;">
<h2>Créer un Compte</h2>
<form method="POST" action="">
<input type="text" name="first_name" placeholder="Prénom" required>
<input type="text" name="last_name" placeholder="Nom" required>
<input type="email" name="email" placeholder="Email" required>
<input type="password" name="password" placeholder="Mot de passe" required>
<button type="submit" name="register">S'inscrire</button>
</form>
<button onclick="document.getElementById('registerModal').style.display='none'">Fermer</button>
</div>
<!-- Formulaire de connexion -->
<div id="loginModal" style="display:none;">
<h2>Se Connecter</h2>
<form method="POST" action="">
<input type="email" name="login_email" placeholder="Email" required>
<input type="password" name="login_password" placeholder="Mot de passe" required>
<button type="submit" name="login">Se Connecter</button>
</form>
<button onclick="document.getElementById('loginModal').style.display='none'">Fermer</button>
</div>
<script>
   // Ferme les modaux quand on clique en dehors d'eux
   window.onclick = function(event) {
       if (event.target.matches('.modal')) {
           event.target.style.display = "none";
       }
   }
</script>


<h1>Bienvenue à l'Afterwork</h1>
 <div> 
    <a href="bar_details.php?id=1"> <!-- Lien vers la page des détails du bar --> <img src="path_to_your_bar_image.jpg" alt="Bar Zebulon" class="bar-image"> <!-- Remplacez avec le chemin de votre image --> <div class="bar-title">Bar Zebulon</div> </a> 
</div>
</body>
{% endblock %}
